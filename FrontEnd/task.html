<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Job - MiniTasker</title>
    <link rel="stylesheet" href="css/taskCreate.css">
    <link rel="stylesheet" href="css/taskHistory.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/Wallet.css">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        /* Hide sections by default */
        .section { display: none; }
        .section.active { display: block; }

        /* Active link style */
        .menu ul li a.active-link {
            background: #334155; /* Darker color for active */
            color: #fbbf24; /* Highlight color */
            font-weight: bold;
        }
        /*#taskList{*/
        /*    display: grid;*/
        /*    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));*/
        /*    gap: 20px;*/
        /*    margin-top: 1.5rem;*/
        /*    padding: 0.5rem;*/
        /*    flex-direction: column;*/
        /*}*/
        /* Container Styles */
        .section {
            padding: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .profile-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Loading Spinner */
        #loadingSpinner {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 2rem;
            color: #64748b;
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid #f3f4f6;
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Task Container */
        .task-main {
            display: flex;
            flex-direction: column; /* Stack items vertically */
            gap: 0.5rem;            /* Space between items */
            width: 90%;
            position: relative;
            padding: 0;              /* Remove extra padding if any */
            margin: 0;               /* Remove extra margin */
        }

        /* Individual Task Items */
        .task-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 70%;                /* Full width of container */
            max-width: 100%;            /* Ensure no restriction */
            margin: 0;                  /* No margin */
            padding: 1rem 1.25rem;      /* Add a bit more padding */
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            box-sizing: border-box;     /* Include padding in width */
            min-height: 60px;
            transition: all 0.4s ease;
        }

        /* If parent container has max-width, override */
        .profile-card {
            width: 100%;
            max-width: 100%;
            padding: 1rem; /* Optional: spacing inside card */
        }


        .task-item:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        /* Task Info */
        .task-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex: 1;
            min-width: 0;
        }

        .avatar-preview {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            flex-shrink: 0;
            font-size: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .task-info div {
            flex: 1;
            min-width: 0;
        }

        .task-title {
            font-weight: 600;
            font-size: 0.9rem;
            margin: 0 0 0.25rem 0;
            color: #1f2937;
            line-height: 1.3;
            word-wrap: break-word;
        }

        .task-client {
            font-size: 0.8rem;
            color: #6b7280;
            margin: 0;
            line-height: 1.4;
            word-wrap: break-word;
        }

        /* Task Rewards */
        .task-rewards {
            flex-shrink: 0;
            margin-left: 0.75rem;
        }

        .status-badge {
            padding: 0.375rem 0.75rem;
            border-radius: 16px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .status-completed {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        /* Empty State */
        #emptyState {
            text-align: center;
            padding: 3rem 2rem;
            color: #64748b;
            font-style: italic;
            background: rgba(248, 250, 252, 0.5);
            border-radius: 12px;
            border: 2px dashed rgba(226, 232, 240, 0.5);
            margin-top: 1rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .task-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .task-rewards {
                margin-left: 0;
                align-self: flex-start;
            }

            .task-info {
                width: 100%;
            }
        }

        /* Animation */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
        }

        .fade-in.show {
            opacity: 1;
            transform: translateY(0);
        }

        .fade-out {
            opacity: 1;
            transform: translateX(0) scale(1);
            transition: all 0.3s ease;
        }

        .fade-out.hide {
            opacity: 0;
            transform: translateX(100%) scale(0.8);
        }


    </style>
</head>
<body>
<div class="header">
    <div class="nav-container">
        <a href="#" class="logo">MINI<span>Tasker</span></a>
        <div class="user-info">
            <span id="headerUsername">Welcome back, User!</span>
            <div class="user-avatar" id="userAvatar">U</div>
            <div class="notification-badge">3</div>
        </div>
    </div>
</div>
<!-- Enhanced Sidebar -->
<div class="sidebar">
    <div class="profile">
        <!--        <img src="https://via.placeholder.com/100" alt="Profile">-->
        <div class="profile-info">
            <h3>Ushan Gimhan</h3>
            <p class="balance">Balance: $0.11 USD</p>
            <p class="username">ushan19333</p>
        </div>
    </div>

    <div class="menu">
        <ul>
            <li><a href="#" onclick="window.location.href='dashboard.html'">Dashboard</a></li>
            <li><a href="#"  data-section="createJob">Create Job</a></li>
            <li><a href="#" data-section="jobHistory">Created Job History</a></li>
            <li><a href="#" data-section="taskHistory">Job Submission History</a></li>

        </ul>
        <ul>
            <li><a href="#"  data-section="wallet">Wallet</a></li>
        </ul>

        <h4>Account</h4>
        <ul>
            <li><a href="#" data-section="profile">Profile</a></li>
            <li><a href="#" data-section="notifications">Notifications</a></li>
            <li><a href="#" data-section="settings">Settings</a></li>
            <li><a href="#" onclick="window.location.href='Home.html'">Logout</a></li>
        </ul>
    </div>
</div>

<!-- Enhanced Main Content -->
<div class="main">

    <!-- Create Job Form -->
    <section id="createJob" class="section active">
        <form id="jobForm" class="form-section">
            <h2>Create New Job</h2>

            <div id="messageArea"></div>

            <div class="form-group">
                <label for="category">Category <span class="required">*</span></label>
                <select id="category" required>
                    <option value="">Select Category</option>
                    <option value="data-entry">Data Entry</option>
                    <option value="survey">Survey</option>
                    <option value="app-testing">App Testing</option>
                    <option value="content-creation">Content Creation</option>
                    <option value="research">Research</option>
                    <option value="social-media-management">Social Media Management</option>
                    <option value="youtube-engagement">YouTube Engagement</option>
                    <option value="facebook-promotion">Facebook Promotion</option>
                    <option value="instagram-marketing">Instagram Marketing</option>
                    <option value="tiktok-promotion">TikTok Promotion</option>
                    <option value="customer-support">Customer Support</option>
                </select>
            </div>

            <div class="form-group">
                <label for="title">Job Title <span class="required">*</span></label>
                <input type="text" id="title" placeholder="Enter a descriptive job title" required>
            </div>

            <div class="form-group">
                <label for="proof">Job Proof <span class="required">*</span></label>
                <select id="proof" required>
                    <option value="">Select Proof Type</option>
                    <option value="screenshot">Screenshot</option>
                    <option value="text-entry">Text Entry</option>
                    <option value="both">Both Required</option>
                    <option value="file-upload">File Upload</option>
                </select>
            </div>

            <div class="inline-inputs">
                <div class="form-group">
                    <label for="quantity">Quantity <span class="required">*</span></label>
                    <input type="number" id="quantity" value="10" min="1" max="1000" required>
                </div>
                <div class="form-group">
                    <label for="workerEarn">Worker Reward <span class="required">*</span></label>
                    <input type="number" id="workerEarn" value="0.14" min="0.01" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="totalBudget">Total Budget</label>
                    <input type="text" id="totalBudget" value="1.40 USD" readonly style="background: linear-gradient(135deg, #f3f4f6, #e5e7eb); color: #6b7280;">
                </div>
            </div>

            <div class="form-group">
                <label for="jobImage">Upload Job Image (Optional)</label>
                <input type="file" id="jobImage" accept="image/*">
            </div>

            <div class="form-group">
                <label for="description">Job Description</label>
                <textarea id="description" placeholder="Provide detailed instructions for workers. Include what they need to do, any specific requirements, and submission guidelines..."></textarea>
            </div>

            <button type="submit" class="btn-submit" id="submitBtn">
                Create Job
            </button>
        </form>
    </section>
    <!-- Task History Section -->
    <section id="taskHistory" class="section">
        <div class="form-section">
            <h2>Task History</h2>

            <!-- Tabs -->
            <div class="tab-nav">
                <button class="tab-link active" data-status="all">All</button>
                <button class="tab-link" data-status="completed">Completed</button>
                <button class="tab-link" data-status="pending">Pending</button>
                <button class="tab-link" data-status="rejected">Rejected</button>
            </div>

            <!-- Task List -->
            <div id="taskList">
                <!-- All Tasks -->
                <div class="task-item" data-status="completed">
                    <p class="task-title">Data Entry for Product Catalog</p>
                    <p class="task-client">Client: Tech Solutions Inc.</p>
                    <p class="coin-value completed">+150 coins</p>
                    <span class="status-badge status-completed">Finished Jobs</span>
                </div>

                <div class="task-item" data-status="completed">
                    <p class="task-title">Image Tagging for Fashion Items</p>
                    <p class="task-client">Client: Global Retail Ltd.</p>
                    <p class="coin-value completed">+200 coins</p>
                    <span class="status-badge status-completed">Completed</span>
                </div>

                <div class="task-item" data-status="pending">
                    <p class="task-title">Survey on Consumer Preferences</p>
                    <p class="task-client">Client: Local Business Group</p>
                    <p class="coin-value pending">+100 coins</p>
                    <span class="status-badge status-pending">Pending</span>
                </div>

                <div class="task-item" data-status="rejected">
                    <p class="task-title">Transcription of Audio Files</p>
                    <p class="task-client">Client: Media Insights</p>
                    <p class="coin-value rejected">+120 coins</p>
                    <span class="status-badge status-rejected">Rejected</span>
                </div>
            </div>
        </div>
    </section>
    <!-- Task History Section -->
    <section id="jobHistory" class="section">
        <div class="form-section">
            <h2>Create Job History</h2>

            <!-- Tabs -->
            <div class="tab-nav">
                <button class="tab-link active" data-status="all">All</button>
                <button class="tab-link" data-status="approved">Approved</button>
                <button class="tab-link" data-status="pending">Pending</button>
                <button class="tab-link" data-status="rejected">Rejected</button>
            </div>

            <!-- Task List -->
            <div id="jobList">
                <!-- Task items will be dynamically inserted here -->
            </div>
        </div>
    </section>



    <section id="profile" class="section">
        <div class="profile-card">
            <h2>Edit Profile</h2>

            <!-- Message Box -->
            <div id="message" class="message"></div>

            <!-- Profile Form -->
            <form id="profileForm">
                <div class="avatar-section">
                    <div class="avatar-container">
                        <div id="avatarPreview" class="avatar-preview">👤</div>
                        <label for="avatarInput" class="avatar-upload-btn" title="Upload profile picture">📸</label>
                        <input type="file" id="avatarInput" accept="image/*">
                    </div>
                    <div class="avatar-hint">Click to change profile picture (Max 5MB)</div>
                </div>

                <div class="form-group">
                    <label for="fullName">Full Name</label>
                    <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" required>
                </div>

                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="Enter your username" disabled>
                </div>

                <div class="form-group">
                    <label for="email1">Email</label>
                    <input type="email" id="email1" name="email1" placeholder="Enter your email" required>
                </div>

                <div class="form-group">
                    <label for="Number">Mobile Number</label>
                    <input type="number" id="Number" name="Number" placeholder="Enter your Mobile Number" required>
                </div>

                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" name="location" placeholder="Enter your location">
                </div>

                <div class="form-group">
                    <label for="bio">Bio</label>
                    <textarea id="bio" name="bio" placeholder="Tell something about yourself"></textarea>
                </div>

                <button type="submit" class="btn-save">Save Changes</button>
            </form>
        </div>
    </section>
    <section id="wallet" class="section">
        <!-- Header -->
        <div class="wallet-header">
            <h2> Wallet</h2>
        </div>

        <!-- Balance Card -->
        <div class="balance-card">
            <p class="balance-label">Current Balance</p>
            <div class="balance-amount">$12,500</div>
        </div>

        <!-- Action Buttons -->
        <div class="wallet-actions">
            <button class="action-btn" id="withdraw-btn">💸 Withdraw</button>
        </div>

        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">📈</div>
                <div class="stat-value">2,850</div>
                <div class="stat-label">Total Earned</div>
                <div class="stat-trend up">↗ +12% this month</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">💸</div>
                <div class="stat-value">1,200</div>
                <div class="stat-label">Total Withdrawn</div>
                <div class="stat-trend down">↘ -3% this month</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">⚡</div>
                <div class="stat-value">45</div>
                <div class="stat-label">Tasks Completed</div>
                <div class="stat-trend up">↗ +8 this week</div>
            </div>
        </div>

        <!-- Transaction History -->
        <div class="transaction-section">
            <h3 class="section-title">Transaction History</h3>

            <!-- Filters -->
            <div class="transaction-filters">
                <button class="filter-btn active">All</button>
                <button class="filter-btn">Earned</button>
                <button class="filter-btn">Withdrawn</button>
                <button class="filter-btn">Bonus</button>
                <button class="filter-btn">This Month</button>
            </div>

            <!-- Transaction List -->
            <div class="transaction-list">
                <!-- Earned Coins -->
                <div class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon earned">💰</div>
                        <div class="transaction-info">
                            <h4>Task Completion Reward</h4>
                            <p>Data Entry for Product Catalog</p>
                            <span class="transaction-date">2 hours ago</span>
                        </div>
                    </div>
                    <div class="transaction-right">
                        <div class="transaction-amount positive">+500 Coins</div>
                        <span class="status-badge status-completed">Completed</span>
                    </div>
                </div>

                <!-- Withdrawal -->
                <div class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon withdrawal">💸</div>
                        <div class="transaction-info">
                            <h4>Withdrawal Request</h4>
                            <p>Bank Transfer - Account: ****1234</p>
                            <span class="transaction-date">1 day ago</span>
                        </div>
                    </div>
                    <div class="transaction-right">
                        <div class="transaction-amount negative">-1,000 Coins</div>
                        <span class="status-badge status-rejected">Rejected</span>
                    </div>
                </div>

                <!-- Bonus -->
                <div class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon bonus">🎁</div>
                        <div class="transaction-info">
                            <h4>Welcome Bonus</h4>
                            <p>New user registration bonus</p>
                            <span class="transaction-date">3 days ago</span>
                        </div>
                    </div>
                    <div class="transaction-right">
                        <div class="transaction-amount positive">+100 Coins</div>
                        <span class="status-badge status-completed">Completed</span>
                    </div>
                </div>

                <!-- More Earned Coins -->
                <div class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon earned">💰</div>
                        <div class="transaction-info">
                            <h4>Survey Completion</h4>
                            <p>Consumer Preferences Survey</p>
                            <span class="transaction-date">5 days ago</span>
                        </div>
                    </div>
                    <div class="transaction-right">
                        <div class="transaction-amount positive">+200 Coins</div>
                        <span class="status-badge status-completed">Completed</span>
                    </div>
                </div>

                <!-- Processing Transaction -->
                <div class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon withdrawal">💳</div>
                        <div class="transaction-info">
                            <h4>PayPal Withdrawal</h4>
                            <p>Email: user@example.com</p>
                            <span class="transaction-date">1 week ago</span>
                        </div>
                    </div>
                    <div class="transaction-right">
                        <div class="transaction-amount negative">-750 Coins</div>
                        <span class="status-badge status-processing">Processing</span>
                    </div>
                </div>

                <!-- Another Task -->
                <div class="transaction-item">
                    <div class="transaction-left">
                        <div class="transaction-icon earned">💰</div>
                        <div class="transaction-info">
                            <h4>Image Tagging</h4>
                            <p>Fashion Items Classification</p>
                            <span class="transaction-date">1 week ago</span>
                        </div>
                    </div>
                    <div class="transaction-right">
                        <div class="transaction-amount positive">+150 Coins</div>
                        <span class="status-badge status-completed">Completed</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="notifications" class="section">
        <div class="profile-card glass">
            <h2 style="margin-bottom:1.5rem;">Notifications</h2>

            <!-- Loading spinner -->
            <div id="loadingSpinner" style="display:none; text-align: center; padding: 1rem; color: #64748b;">
                <div style="display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f4f6; border-radius: 50%; border-top-color: #3b82f6; animation: spin 1s ease-in-out infinite;"></div>
                <span style="margin-left: 0.5rem;">Loading notifications...</span>
            </div>

            <!-- Container for notifications -->
            <main id="taskMain" class="task-main" style="display: none;">
                <!-- Notifications will be injected here by JS -->
            </main>

            <!-- Empty state -->
            <div id="emptyState" style="display:none; margin-top:1rem; padding: 2rem; text-align: center; color: #64748b; font-style: italic; background: #f8fafc; border-radius: 8px; border: 2px dashed #e2e8f0;">
                No notifications to display
            </div>
        </div>
    </section>

    <section id="settings" class="section">
        <div class="settings-container">
            <!-- Notification Preferences -->
            <div class="card">
                <h2 class="card-title">Notification Preferences</h2>
                <div class="toggle-group">
                    <label>Job Status Updates
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                    <label>New Messages
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                    <label>Promotional Emails
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <!-- Payment Methods -->
            <div class="card">
                <h2 class="card-title">Payment Methods</h2>
                <div class="payment-item">
                    <div class="payment-info">
                        <img src="https://via.placeholder.com/48x30" alt="Visa Card">
                        <span>Visa **** 1234</span>
                    </div>
                    <button class="btn btn-danger">Remove</button>
                </div>
                <button type="button" class="btn btn-primary w-full">Add New Method</button>
            </div>

            <!-- Language Settings -->
            <div class="card">
                <h2 class="card-title">Language Settings</h2>
                <select id="language" name="language">
                    <option>English</option>
                    <option>Sinhala</option>
                    <option>Tamil</option>
                </select>
            </div>
        </div>
    </section>

</div>

<script src="js/taskCreate.js"></script>
<script src="js/profile.js"></script>
<script src="js/TaskHistory.js"></script>
<script src="js/SubmisionHistory.js"></script>
<script src="js/payment.js"></script>
<script src="js/wallet.js"></script>
<script src="js/loadNotifications.js"></script>
<script>
    // Sidebar navigation toggle
    document.addEventListener('DOMContentLoaded', () => {
        const defaultLink = document.querySelector('.menu ul li a[data-section="createJob"]'); // replace "create-task" with the actual section ID
        if (defaultLink) {
            // Show the default section
            document.getElementById(defaultLink.getAttribute('data-section')).classList.add('active');

            // Highlight the default link
            defaultLink.classList.add('active-link');
        }

        // Add click events for menu links
        document.querySelectorAll('.menu ul li a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('data-section');

                // Show selected section
                document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
                document.getElementById(sectionId).classList.add('active');

                // Highlight active link
                document.querySelectorAll('.menu ul li a').forEach(a => a.classList.remove('active-link'));
                this.classList.add('active-link');
            });
        });
    });

    // --------------------- Top-Up JS ---------------------
    const topupMessageArea = document.getElementById("topupMessageArea");
    function showTopupMessage(message, type='success'){
        topupMessageArea.innerHTML = `<div class="message ${type}" style="display:block;">${message}</div>`;
        setTimeout(()=> topupMessageArea.innerHTML='', 3000);
    }

    $("#topupForm").on("submit", async function(e){
        e.preventDefault();
        const submitBtn = document.getElementById("submitTopup");
        submitBtn.disabled = true;
        submitBtn.textContent = "Processing...";

        try {
            const amount = parseFloat($("#topupAmount").val());
            const method = $("#paymentMethod").val();

            if(!amount || !method){
                throw new Error("Please enter a valid amount and select a payment method");
            }

            // Simulate backend API call
            await new Promise(resolve => setTimeout(resolve, 1000));

            showTopupMessage(`Successfully topped up $${amount.toFixed(2)} via ${method}`, 'success');
            $("#topupForm")[0].reset();
        } catch(err){
            showTopupMessage(err.message, 'error');
        } finally {
            submitBtn.disabled = false;
            submitBtn.textContent = "Top Up";
        }
    });
</script>
<script>
    document.getElementById("withdraw-btn").addEventListener("click", function() {
        // Redirect to n.html when button is clicked
        window.location.href = "payOut.html";
    });
</script>


</body>
</html>